---
import { type MarkdownInstance } from "astro";
import Layout from "../../layouts/Layout.astro";
interface Frontmatter {
  title: string;
  description: string;
  date: number;
}

const matches = import.meta.glob<MarkdownInstance<Frontmatter>>(
  "../blog/**/*.md",
  { eager: true },
);

const posts = Object.values(matches);
posts.sort((a, b) => b.frontmatter.date - a.frontmatter.date);
---

<Layout
  title="Blog"
  description="Read the latest articles and updates about Audexis."
>
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <h1 class="text-4xl font-bold mb-8">Blog</h1>
    <div class="space-y-8">
      {
        posts.map((post) => (
          <article class="border-b border-border pb-6">
            <a href={post.url} class="text-2xl font-semibold hover:underline">
              {post.frontmatter.title}
            </a>
            <p class="text-sm text-muted-foreground mt-1">
              {new Date(post.frontmatter.date).toLocaleDateString(undefined, {
                year: "numeric",
                month: "long",
                day: "numeric",
              })}
            </p>
            {post.frontmatter.description && (
              <p class="mt-4 text-base text-foreground/80">
                {post.frontmatter.description}
              </p>
            )}
          </article>
        ))
      }
    </div>
  </div>
</Layout>
